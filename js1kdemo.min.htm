<!DOCTYPE html>
<!-- saved from url=(0035)http://js1k.com/pleaseDontHotlinkMe -->
<HTML><HEAD><META http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<TITLE>JS1k, 1k demo submission [id]</TITLE>
		<META charset="utf-8">
	</HEAD><BODY>
		<CANVAS id="c"></CANVAS>
		<SCRIPT>
var c=document.getElementById("c");var l="   ##### ####.  ### $.$.  ##@$# #$ ## $. .  #####$#$ #  #. .  #  #######";var u=l.indexOf("@"),w=9,h=8,pc=0,mv=0;document.onkeydown=function(b){var a=b.keyCode;if(!(l.indexOf(".")==-1&&!(".*".indexOf(l.charAt(u-1))>-1))){if(a==37){mz(u-1,u-2)}if(a==38){mz(u-w,u-(2*w))}if(a==39){mz(u+1,u+2)}if(a==40){mz(u+w,u+(2*w))}}else{alert("game over\nmoves: "+mv+" pushes: "+pc)}};setInterval(function(){var d=0,a=c.getContext("2d");a.textBaseline="top";a.font="15px monospace";a.clearRect(0,0,c.width,c.height);for(var b=0;b<h;b++){a.fillText(l.substring(b*w,(b*w)+w).replace("!","@"),0,d);d+=15}},10);function mz(a,d){var e=function(g){return l.charAt(g)};var b=function(g,k){l=l.substring(0,k)+g+l.substring(k+1)};var i=e(u),f=e(a),j=e(d);if(f!="#"){if(f=="$"||f=="*"){if(j!="#"&&j!="$"&&j!="*"){b(j==" "?"$":j=="."?"*":" ",d);b(f=="$"?"@":f=="*"?"!":"@",a);b(i=="@"?" ":i=="!"?".":" ",u);u=a;pc++;mv++}}else{b(f==" "?"@":f=="."?"!":" ",a);b(i=="@"?" ":i=="!"?".":" ",u);u=a;pc++;mv++}}};
        </SCRIPT>
    </BODY>
</HTML>